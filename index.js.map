{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '46403551-b403f9f66c1c3bacc7ad46072';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n//Getting images by query\nexport default async function getImages(query, page, perPage) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: KEY,\n                q: query,\n                page: page,\n                per_page: perPage,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n            },\n        });\n        return response;\n    } catch (e) {\n        return e.message;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\n\n// Init a new instence of the SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery .gallery-item a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    showCounter: false,\n});\n\n// Rendering the gallery with results\nexport default function renderGallery(images, page) {\n    const gallery = document.querySelector('.gallery');\n    let markup = '';\n\n    images.forEach(image => {\n        const { largeImageURL, tags, likes, views, comments, downloads } =\n            image;\n\n        markup += `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${largeImageURL}\"\n          alt=\"${tags}\"\n        />\n        <div class=\"gallery-footer\">\n          <div class=\"footer-item\">\n            <span class=\"item-title\">Likes</span>\n            <span class=\"item-value\">${likes}</span>\n          </div>\n          <div class=\"footer-item\">\n            <span class=\"item-title\">Views</span>\n            <span class=\"item-value\">${views}</span>\n          </div>\n          <div class=\"footer-item\">\n            <span class=\"item-title\">Comments</span>\n            <span class=\"item-value\">${comments}</span>\n          </div>\n          <div class=\"footer-item\">\n            <span class=\"item-title\">Downloads</span>\n            <span class=\"item-value\">${downloads}</span>\n          </div>\n        </div>\n      </a>\n    </li>`;\n    });\n\n    //First page -> empty gallery\n    if (page === 1) {\n        gallery.innerHTML = '';\n    }\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    //Load more images -> scroll down\n    if (page > 1) {\n        const galleryItem = document.querySelector('.gallery-item');\n        const rect = galleryItem.getBoundingClientRect();\n        const h = rect.bottom - rect.top;\n        window.scrollBy({\n            top: h * 2,\n            left: 0,\n            behavior: 'smooth',\n        });\n    }\n\n    lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport getImages from './js/pixabay-api';\nimport renderGallery from './js/render-functions';\n\nconst form = document.querySelector('.images-form');\nconst inputQuery = form.elements.query;\nconst loadMoreBtn = document.getElementById('js-load-more');\nconst gallery = document.querySelector('.gallery');\nlet page = 1;\nlet perPage = 15;\nlet savedQuery = '';\n\n// iziToast settings\niziToast.settings({\n    position: 'topRight',\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n});\n\n//Submit listener\nform.addEventListener('submit', evt => {\n    evt.preventDefault();\n    const query = inputQuery.value.trim();\n    if (query.length < 3) {\n        iziToast.error({\n            message: `❌ Input at last three symbols!`,\n        });\n        return;\n    }\n    processSubmit(query);\n});\n\n//Load more listener\nloadMoreBtn.addEventListener('click', () => {\n    processSubmit(savedQuery);\n});\n\n//Processing submit\nasync function processSubmit(query) {\n    form.reset();\n    showLoader();\n\n    page = query != savedQuery ? 1 : page + 1;\n    savedQuery = query;\n\n    const result = await getImages(query, page, perPage);\n    hideLoader();\n\n    if (result.status !== 200) {\n        hideShowMoreBtn();\n        gallery.innerHTML = '';\n        iziToast.error({\n            message: `❌ ${result}!`,\n        });\n        return;\n    }\n\n    if (result.data.hits.length > 0) {\n        renderGallery(result.data.hits, page);\n\n        //If the search results all showing on the page - hide \"load more\" button\n        if (page * perPage >= result.data.totalHits) {\n            hideShowMoreBtn();\n        } else {\n            showLoadMoreBtn();\n        }\n    } else {\n        hideShowMoreBtn();\n        gallery.innerHTML = '';\n        iziToast.error({\n            message: `❌ No results found!`,\n        });\n    }\n\n    //Show load more button\n    function showLoadMoreBtn() {\n        loadMoreBtn.classList.remove('hidden');\n    }\n\n    //Hide load more button\n    function hideShowMoreBtn() {\n        loadMoreBtn.classList.add('hidden');\n    }\n\n    //Show spinned loader\n    function showLoader() {\n        document.querySelector('.backdrop-loader').classList.add('visible');\n    }\n\n    //Hide loader\n    function hideLoader() {\n        document.querySelector('.backdrop-loader').classList.remove('visible');\n    }\n}\n"],"names":["KEY","BASE_URL","getImages","query","page","perPage","axios","e","lightbox","SimpleLightbox","renderGallery","images","gallery","markup","image","largeImageURL","tags","likes","views","comments","downloads","rect","h","form","inputQuery","loadMoreBtn","savedQuery","iziToast","evt","processSubmit","showLoader","result","hideLoader","hideShowMoreBtn","showLoadMoreBtn"],"mappings":"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"}